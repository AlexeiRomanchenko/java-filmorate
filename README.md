# Java-Filmorate
##### Групповой проект java-filmorate группа №5

___

## Участники:
* Романченко Алексей **/ тимлид**
* Галимов Алексей
* Леонид Коженкин
* Антон Титов


## Функциональность

____

### Режиссеры
В информацию о фильмах добавлен список режиссёров.
#### Добавлена функциональность:
1. Вывод всех фильмов режиссёра, отсортированных по количеству лайков.
```sh
                GET /films/director/{directorId}?sortBy=[likes]
```
2. Вывод всех фильмов режиссёра, отсортированных по годам.
```sh 
                GET /films/director/{directorId}?sortBy=[year]
```
3. Вывод списка всех режиссёров
```sh
                GET /directors
```
4. Получение режиссёра по id
```sh
                GET /directors/{id}
```
5. Создание режиссёра
```sh 
                POST /directors
```
6. Изменение режиссёра
```sh
                PUT /directors
```
7. Удаление режиссёра
```sh 
                DELETE /directors/{id}
```

### Отзывы
В приложении добавлены отзывы на фильмы.
#### Характеристики отзыва.
1. Оценка — полезно/бесполезно.
2. Тип отзыва — негативный/положительный.
3. Рейтинг (рассчитывается из оценок пользователей), отзывы сортируются по рейтингу

#### Добавлена функциональность:
1. Добавление нового отзыва.
```sh
                POST /reviews
```
2. Редактирование уже имеющегося отзыва.
```sh
                PUT /reviews
```
3. Удаление уже имеющегося отзыва.
```sh
                DELETE /reviews/{id}
```
4. Получение отзыва по идентификатору.
```sh
                GET /reviews/{id}
```
5. Получение всех отзывов по идентификатору фильма (если  не указан то все). Если кол-во не указано то 10.
```sh
                GET /reviews?filmId={filmId}&count={count}
```
6. Возможность поставить и удалить лайк / дизлайк отзыву.
* пользователь ставит лайк отзыву.
```sh
                PUT /reviews/{id}/like/{userId}
```
* пользователь ставит дизлайк отзыву.
```sh
                PUT /reviews/{id}/dislike/{userId}
``` 
* пользователь удаляет лайк/дизлайк отзыву.
```sh
                DELETE /reviews/{id}/like/{userId}
``` 
* пользователь удаляет дизлайк отзыву.
```sh 
                DELETE /reviews/{id}/dislike/{userId}
```

### Лента событий
Добавлена возможность просмотра последних событий на платформе —
добавление в друзья, удаление из друзей, лайки и отзывы, которые оставили друзья пользователя.

* Возвращает ленту событий пользователя.
```sh
                GET /users/{id}/feed
```

### Рекомендации
Реализована простая рекомендательная система для фильмов.
* возвращает рекомендации по фильмам для просмотра.
```sh
                GET /users/{id}/recommendations
```

### Общие фильмы
Реализован вывод общих с другом фильмов с сортировкой по их популярности.
Возвращает список фильмов, отсортированных по популярности.
```sh
                GET /films/common?userId={userId}&friendId={friendId}
``` 
## Параметры:
*userId* — идентификатор пользователя, запрашивающего информацию;

*friendId* — идентификатор пользователя, с которым необходимо сравнить список фильмов.

### Удаление фильмов и пользователей
Добавлена функциональность для удаления фильма и пользователя по идентификатору.
* Удаляет пользователя по идентификатору.
```sh
                DELETE /users/{userId}
``` 
* Удаляет фильм по идентификатору.
```sh
                DELETE /films/{filmId}
``` 

### Вывод самых популярных фильмов по жанру и году
Добавлена возможность выводить топ-N фильмов по количеству лайков с фильтрацией по двум параметрам:
1. По жанру.
2. За указанный год.
```sh
                GET /films/popular?count={limit}&genreId={genreId}&year={year}
```
### Поиск
Реализован поиск по названию фильмов и по режиссёру по подстроке
* Возвращает список фильмов, отсортированных по популярности.
```sh
                GET /fimls/search
```
### Параметры строки запроса:
*query* — текст для поиска
*by* — может принимать значения
*director* (поиск по режиссёру),
*title* (поиск по названию),
либо оба значения через запятую при поиске одновременно и по режиссеру и по названию.
##### Пример
```sh
                GET /films/search?query=крад&by=director,title
```

# ER-диаграмма
[Схема БД к проекту Filmorate.](https://dbdiagram.io/d/64a9e50502bd1c4a5ebb4f02)
БД состоит из 2 основных таблиц (*Users* и *Films*) и нескольких дополнительных таблиц,
которые устанавливают связь между основными таблицами или являются вспомогательными для нормализации БД.
![DBSchema](db_diagram.png)

